# DB
## ORM
[Source](https://medium.com/@codeshifu/object-relational-mapping-concepts-e2ff0838590c)
* Allows us to query and manipulate data stored in a relational database using an object-oriented approach
* Enables us to interact directly with the database using objects in an object-oriented language it supports. This means no more long SQL queries
* Behind it: data layer:
1. Library written in the object-oriented language that is part or works together with your web framework of choice
2. Acts as a translator between the OO language and database and is able to handle translations between them
3. Encapsulates the code needed to manipulate the data (using raw queries) and provides a set of APIs on objects to interact directly with the database
### PROS
[Source](https://medium.com/@antonio.v0c3/benefits-of-object-relational-mapping-b5b57decfb3f)
* It facilitates implementing the Domain Model pattern: 
1. Using this pattern means that you model entities based on real business concepts rather than based on your database structure
2. ORM tools provide this functionality through mapping between the logical business model and the physical storage model
* Productivity: the ORM tool generates 100% of the data access code automatically based on the data model you define -> code reduced
* Application Maintainability: All of the code generated by the ORM is presumably well-tested, so you usually don’t need to worry about testing it extensively

## CRUD - Create, Read, Update and Delete
[Source](https://www.codecademy.com/articles/what-is-crud)
* A model should have the ability to perform at most these four functions in order to be complete
* Provides a memorable framework for reminding developers of how to construct full, usable models
* In a REST environment, CRUD often corresponds to the HTTP methods POST, GET, PUT, and DELETE, respectively

### Create
* This would consist of a function which we would call when a new library book is being added to the catalog. The program calling the function would supply the values 
* Additionally, the new entry is assigned a unique id (if it is annotated as @Id)
* Create resources in a REST environment, we most commonly use the HTTP POST method. POST creates a new resource of the specified resource type

### Read
* To read resources in a REST environment, we use the GET method. Reading a resource should never change any information - it should only retrieve it

### Update
*  There should be a function to call when information about a book must be changed. The program calling the function would supply the new values
* PUT is the HTTP method used for the CRUD operation, Update

### Delete
* There should be a function to call to remove a library book from the repository. The program calling the function would supply one or more values to identify the object
* The CRUD operation Delete corresponds to the HTTP method DELETE. It is used to remove a resource from the system
* Such a call, if successful, returns a response code of 204 (NO CONTENT), with no response body

## Foreign Key
[Source](https://www.techopedia.com/definition/7272/foreign-key)
* Column or group of columns in a relational database table that provides a link between data in two tables
* Acts as a cross-reference between tables because it references the primary key of another table, thereby establishing a link between them
* For any column acting as a foreign key, a corresponding value should exist in the link table
* For instance, if there are two tables, customer and order, a relationship can be created between them by introducing a foreign key into the order table that refers to the customer ID in the customer table
* The customer ID column exists in both customer and order tables. The customer ID in the order table becomes the foreign key, referring to the primary key in the customer table
### Referential actions associated with a foreign key action
* Cascade: When rows in the parent table are deleted, the matching foreign key columns in the child table are also deleted, creating a cascading delete
* Set Null: When a referenced row in the parent table is deleted or updated, the foreign key values in the referencing row are set to null to maintain the referential integrity
* Triggers: Referential actions are normally implemented as triggers. In many ways foreign key actions are similar to user-defined triggers. To ensure proper execution, ordered referential actions are sometimes replaced with their equivalent user-defined triggers
* Set Default: This referential action is similar to "set null." The foreign key values in the child table are set to the default column value when the referenced row in the parent table is deleted or updated
* Restrict: This is the normal referential action associated with a foreign key. A value in the parent table cannot be deleted or updated as long as it is referred to by a foreign key in another table
* No Action: This referential action is similar in function to the "restrict" action except that a no-action check is performed only after trying to alter the table

## SQL Syntax
[Source](https://www.tutorialrepublic.com/sql-tutorial/sql-syntax.php)
### SQL Statements
* Very simple and straightforward like plain English but with specific syntax
* An SQL statement is composed of a sequence of keywords, identifiers, etc. terminated by a semicolon (;)
### Case sensitivity
* SQL keywords are case-insensitive that means SELECT is same as select. But, the database and table names may case-sensitive depending on the operating system
* It is recommended to write the SQL keywords in uppercase, to differentiate it from other text inside a SQL statement for a better understanding
### SQL Comments
* A comment is simply a text that is ignored by the database engine
* SQL support single-line as well as multi-line comments. To write a single-line comment start the line with two consecutive hyphens (--)
* Write multi-line comments, start the comment with a slash followed by an asterisk (/*) and end the comment with an asterisk followed by a slash (*/)
### Basic SQL Statements
[Source](https://mariadb.com/kb/en/library/basic-sql-statements/)
#### Defining How Your Data Is Stored
* CREATE DATABASE is used to create a new, empty database.
* DROP DATABASE is used to completely destroy an existing database.
* USE is used to select a default database.
* CREATE TABLE is used to create a new table, which is where your data is actually stored.
* ALTER TABLE is used to modify an existing table's definition.
* DROP TABLE is used to completely destroy an existing table.
* DESCRIBE shows the structure of a table.
#### Manipulating Your Data
* SELECT is used when you want to read (or select) your data.
* INSERT is used when you want to add (or insert) new data.
* UPDATE is used when you want to change (or update) existing data.
* DELETE is used when you want to remove (or delete) existing data.
* REPLACE is used when you want to add or change (or replace) new or existing data.
* TRUNCATE is used when you want to empty (or delete) all data from the template.

#### Other Syntax
[Source](https://sqlbolt.com/lesson/updating_rows)
* WHERE: In order to filter certain results from being returned, we need to use a WHERE clause in the query
* Operator	Condition	SQL Example
* Operator	Condition	Example
1. =	Case sensitive exact string comparison (notice the single equals)	col_name = "abc"
2. != or <>	Case sensitive exact string inequality comparison	col_name != "abcd"
3. LIKE	Case insensitive exact string comparison	col_name LIKE "ABC"
4. NOT LIKE	Case insensitive exact string inequality comparison	col_name NOT LIKE "ABCD"
5. %	Used anywhere in a string to match a sequence of zero or more characters (only with LIKE or NOT LIKE)	col_name LIKE "%AT%"
(matches "AT", "ATTIC", "CAT" or even "BATS")
6. _	Used anywhere in a string to match a single character (only with LIKE or NOT LIKE)	col_name LIKE "AN_"
(matches "AND", but not "AN")
7. IN (…)	String exists in a list	col_name IN ("A", "B", "C")
8. NOT IN (…)	String does not exist in a list	col_name NOT IN ("D", "E", "F")
* ORDER BY  SQL provides a way to sort your results by a given column in ascending or descending order using the ORDER BY clause
* LIMIT: The LIMIT will reduce the number of rows to return
* OFFSET: optional OFFSET will specify where to begin counting the number rows from
* JOIN: Using the JOIN clause in a query, we can combine row data across two separate tables using this unique key. The first of the joins that we will introduce is the INNER JOIN
